function getStateCountyId(t,e){d3.json(t,function(t,a){e(null,a)})}function setStateCountyId(t){dataMeasureId.splice(0);var e;e="data/national_county_id.json",q=d3.queue(),q.defer(getStateCountyId,e),q.await(function(e,a){if(e)throw e;stateCode=a[t-1].state_code,countyCode=a[t-1].county_code;var n=a[t-1].county_name+", "+a[t-1].state;$("#secondRow").show(1e3),$("#summaryMapDiv").show(1e3),$("#compareDiv").show(1e3),d3.select("#cdcState").text(n).style("color","#898a8c").style("text-align","center"),demographyInfo(),getRaceData(stateCode,countyCode),getFemaleData(stateCode,countyCode),getMaleeData(stateCode,countyCode)})}function getCdcData(t,e,a){progress=0,dataMeasureId.splice(0),dataSideLeft.splice(0);var n,r,l=e,o=d3.queue();o.defer(getJsonData,l),o.await(function(t,e){n=Object.keys(e.central).length;for(var l=d3.queue(),o=0;o<n;o++){var i=e.central[o].measureId,s=e.central[o].name,u=e.central[o].info,d=e.central[o].desc,c=e.central[o].bench;d3.select("#progressBar").text("Progress Count ="+progress),l.defer(measureIdStateLocalJson,stateCode,countyCode,i,s,u,d,c)}l.awaitAll(function(t,n){if(t)throw t;thirdRow_C=1,1==thirdRow_C&&1==thirdRow_L&&$("#loading").hide(),console.log("Goodbye working!"),dataMeasureId=n,1==a&&renderDataArrayBar("svg#newChart",dataMeasureId),0==a&&renderDataArrayRect("svg#newChart",dataMeasureId),r=Object.keys(e.side).length;for(var l=d3.queue(),o=0;o<r;o++){var i=e.side[o].measureId,s=e.side[o].name,u=e.side[o].info,d=e.side[o].desc,c=e.side[o].bench;l.defer(measureIdStateLocalJson,stateCode,countyCode,i,s,u,d,c)}l.awaitAll(function(t,e){if(t)throw t;console.log("Goodbye working Again!"),thirdRow_L=1,1==thirdRow_C&&1==thirdRow_L&&$("#loading").hide(),dataSideLeft=e,renderDataArrayLeft("svg#effectSvg",dataSideLeft)})})})}function rightSideInfo(t){d3.select("p#infoClip").html(t)}function testData(){}function getJsonData(t,e){d3.json(t,function(t,a){e(null,a)})}function renderDataArrayBar(t,e){var a=e,n=0,r=(a=a.sort(function(t,e){return t.value-e.value}))[a.length-1].value,l=d3.scaleLinear().domain([0,r]).range([0,600/3.5]),o=d3.select(t).attr("width",600).attr("height",20*a.length),i=d3.select("body").append("div").attr("class","tooltip1").style("opacity",0),s=o.selectAll("g").data(a).enter().append("g").attr("transform",function(t,e){return"translate(0,"+20*e+")"}).style("fill","#ffffff").on("click",function(t){ScrollTo("fifthRow"),$("#fourthRow").show(1e3),$("#fifthRow").show(1e3),$("#annualArrow").show(1e3),$("#sideCompareArrow").show(1e3),allYearlyTrends(t.id,t.stateCode,t.countyCode,t.name,"div#annualChart")}).style("display","block").style("cursor","pointer").on("mouseover",function(t){rightSideInfo(t.desc+"<p style=color:#ffffff></p>"),i.transition().duration(5).style("opacity",1),i.html(t.name+"<br/>"+t.infoClip).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){rightSideInfo(""),i.transition().duration(5).style("opacity",0)});s.append("rect").attr("x",240).attr("width",function(t){return l(t.value)}).attr("height",19).style("fill",function(t){return parseFloat(t.value)>parseFloat(t.national)?(n++,"#d4d4d4"):parseFloat(t.value)<=parseFloat(t.national)?"#9c9c9c":0==parseFloat(t.value)||null==t.value?"#A3D7FA":void 0}),s.append("text").transition().duration(2e3).attr("x",function(t){return l(t.value)+240+5}).attr("y",10).attr("dy",".35em").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).attr("text-anchor","start").text(function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"("+t.value+", "+t.national+")";if(1==t.isCounty)return"("+t.value+", "+t.national+")"}if(0==t.national){if(0==t.isCounty)return"("+t.value+", NA)";if(1==t.isCounty)return"("+t.value+", NA)"}}if(0==t.value||null==t.value)return"(No Data)"}),s.append("text").transition().duration(1e3).attr("x",230).attr("y",10).style("fill","#000000").attr("dy",".35em").attr("text-anchor","end").text(function(t){return t.name}),d3.select("h5#centerDataLegend").html("*<strong>If font is bold: Left side data is  state level.</strong> If font is normal: Left side data is county level. Right side data is always national level. NA means data not available.").style("color","#898a8c").style("text-anchor","middle").style("text-align","center"),d3.select("h5#numberHigher").text("Number of markers higher than national average: "+n+"  out of  "+a.length)}function renderDataArrayRect(t,e){circleRadius=120;var a=e,n=0,r=(a=a.sort(function(t,e){return t.value-e.value}))[0].value;for(i=0;i<a.length-1;i++)r=a[i].value<=a[i+1].value?a[i+1].value:r;d3.scaleLinear().domain([0,r]).range([0,300]);var l=d3.select(t).attr("width",600).attr("height",30*a.length*2.5),o=d3.select("body").append("div").attr("class","tooltip1").style("opacity",0),s=l.selectAll("g").data(a).enter().append("g").attr("transform",function(t,e){return"translate(0,"+40*e+")"}).on("click",function(t){ScrollTo("fifthRow"),$("#fourthRow").show(1e3),$("#fifthRow").show(1e3),$("#annualArrow").show(1e3),$("#sideCompareArrow").show(1e3),allYearlyTrends(t.id,t.stateCode,t.countyCode,t.name,"div#annualChart")}).style("display","block").style("cursor","pointer").on("mouseover",function(t){rightSideInfo(t.desc+"<p style=color:#ffffff></p>"),o.transition().duration(5).style("opacity",1),o.html(t.name+"<br/>"+t.infoClip).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){rightSideInfo(""),o.transition().duration(5).style("opacity",0)});s.append("rect").attr("class","centralRect").attr("y",function(t,e){return 30*Math.floor(e/1)+10}).attr("x",function(t,e){return 290}).attr("rx",20).attr("width",function(t){return 150}).attr("height",30).style("fill",function(t){return parseFloat(t.value)>parseFloat(t.national)?(n++,"#d4d4d4"):parseFloat(t.value)<=parseFloat(t.national)?"#9c9c9c":0==parseFloat(t.value)||null==t.value?"#A3D7FA":void 0}),s.append("text").attr("y",function(t,e){return 30*Math.floor(e/1)+10+15}).attr("x",function(t,e){return 365}).attr("dy","0.35em").attr("font-family","sans-serif").attr("font-size","1em").attr("text-anchor","middle").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).text(function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return t.value+", "+t.national;if(1==t.isCounty)return t.value+"^, "+t.national}if(0==t.national){if(0==t.isCounty)return t.value+", NA";if(1==t.isCounty)return t.value+", NA"}}if(0==t.value||null==t.value)return"No Data"}),s.append("text").attr("y",function(t,e){return 30*Math.floor(e/1)+10+47}).attr("x",function(t,e){return 365}).style("fill","black").attr("font-family","sans-serif").attr("font-size","1em").attr("text-anchor","middle").text(function(t){return t.name}),d3.select("h5#numberHigher").text("Number of markers higher than national average: "+n+"  out of  "+a.length),d3.select("h5#centerDataLegend").html("*<strong>If font is bold: Left side data is  state level.</strong> If font is normal: Left side data is county level. Right side data is always national level. NA means data not available.").style("color","#898a8c").style("text-anchor","middle").style("text-align","center")}function renderDataArrayLeft(t,e){var a=e,n=0,r=(a=a.sort(function(t,e){return t.value-e.value}))[0].value;for(i=0;i<a.length-1;i++)r=a[i].value<=a[i+1].value?a[i+1].value:r;d3.scaleLinear().domain([0,r]).range([0,150]);var l=d3.select(t).attr("width",300).attr("height",60*a.length),o=d3.select("body").append("div").attr("class","tooltip2").style("opacity",0),s=l.selectAll("g").data(a).enter().append("g").attr("transform",function(t,e){return"translate(0,"+0*e+")"}).on("click",function(t){}).on("mouseover",function(t){rightSideInfo(t.desc+"<p style=color:#ffffff></p>"),o.transition().duration(5).style("opacity",1),o.html(t.name+"<br/>"+t.infoClip).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){rightSideInfo(""),o.transition().duration(5).style("opacity",0)});s.append("rect").attr("class","sideRect").attr("y",function(t,e){return 60*Math.floor(e/1)+10}).attr("x",function(t,e){return 60}).attr("rx",20).attr("width",function(t){return 120}).attr("height",30).style("fill",function(t){return parseFloat(t.value)>parseFloat(t.national)?(n++,"#d4d4d4"):parseFloat(t.value)<=parseFloat(t.national)?"#9c9c9c":0==parseFloat(t.value)||null==t.value?"#A3D7FA":void 0}),s.append("text").attr("y",function(t,e){return 60*Math.floor(e/1)+10+15}).attr("x",function(t,e){return 120}).attr("dy","0.35em").attr("font-family","sans-serif").attr("font-size","1em").attr("text-anchor","middle").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).text(function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return t.value+", "+t.national;if(1==t.isCounty)return t.value+", "+t.national}if(0==t.national){if(0==t.isCounty)return t.value+", NA";if(1==t.isCounty)return t.value+", NA"}}if(0==t.value||null==t.value)return"No Data"}),s.append("text").attr("y",function(t,e){return 60*Math.floor(e/1)+10+47}).attr("x",function(t,e){return 120}).style("fill","white").attr("font-family","sans-serif").attr("font-size","1em").attr("text-anchor","middle").text(function(t){return t.name}),d3.select("h5#sideDataLegend").html("*<strong>If font is bold: Left side data is  state level.</strong> Right side data is always national level. NA means data not available.").style("color","white").style("text-anchor","middle").style("text-align","center")}function testQue(){for(var t=d3.queue(),e=0;e<20;++e)t.defer(delayedHello);t.awaitAll(function(t){if(t)throw t;console.log("Goodbye!")})}function delayedHello(t){console.log("Hello!"),t(null)}function testData(t){}function newRender(t,e){var a=d3.select("div#chart").append("svg").attr("width",600).attr("height",20);a.selectAll("g").data(t).enter().append("g").selectAll("rect").data(function(t){return t.tableResult}).enter().append("rect").attr("y",function(t,e){return 30*e}).attr("width",function(t){return t.dataValue}).attr("height",19);a.append("g").selectAll("g").data(t).enter().append("g").selectAll("text").data(function(t){return t.tableResult}).enter().append("text").attr("x",function(t){return t.dataValue+140}).attr("y",19).text(function(t){return e+" ("+t.dataValue+")"}).attr("font-family","sans-serif").attr("font-size","1em").attr("fill","black")}function demoGraphy_income(t,e){d3.select("#incomeData").text("$ "+t.tableResult[0].dataValue.toLocaleString("en-US")+" for "+e)}function yearInfo(t){var e,a="https://ephtracking.cdc.gov/apigateway/api/v1/getYears/"+t+"/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(a,function(t,a){var n=a.length;return e=a[n-1]})}function demographyInfo(){demoIds_L=[324,328,327],demoIds_R=[570,571,96,428];var t="Median Household Income";for(q=d3.queue(),i=0;i<demoIds_L.length;i++)q.defer(measureIdStateLocalJson,stateCode,countyCode,demoIds_L[i],"Median Annual Income","Median Household Income",t,0);for(q.awaitAll(function(t,e){var a=[],n=[];0==e[0].isCounty&&d3.select("#popData").text("The state population is "+numberToThousands(e[0].value)),0==e[1].isCounty&&(a[0]={name:"State",value:e[1].value},a[1]={name:"National",value:53118}),0==e[2].isCounty&&(n[0]={name:"State",value:e[2].value},n[1]={name:"National",value:17.2}),1==e[0].isCounty&&d3.select("#popData").text("The county population is "+numberToThousands(e[0].value)),1==e[1].isCounty&&(a[0]={name:"County",value:e[1].value},a[1]={name:"National",value:53118}),1==e[2].isCounty&&(n[0]={name:"County",value:e[2].value},n[1]={name:"National",value:17.2}),getFinancialChart(a,"Household Income ($)","div#incomeInfo"),getFinancialChart(n,"Population in Poverty (%)","div#povertyInfo")}),q=d3.queue(),i=0;i<demoIds_R.length;i++)q.defer(measureIdStateLocalJson,stateCode,countyCode,demoIds_R[i],"Median Annual Income","Median Household Income",t,0);q.awaitAll(function(t,e){console.log(e),0==e[0].isCounty&&d3.select("#hospData").text("There are "+e[0].value+" hospitals in the state"),1==e[0].isCounty&&d3.select("#hospData").text("There are "+e[0].value+" hospitals in the county"),0==e[1].isCounty&&d3.select("#hospPerData").text("There are "+e[1].value+" hospitals per 100,000 in the state"),1==e[1].isCounty&&d3.select("#hospPerData").text("There are "+e[1].value+" hospitals per 100,000 in the county"),0==e[2].isCounty&&d3.select("#houseData").text(e[2].value+"%  of homes, in the state, were build before 1950"),1==e[2].isCounty&&d3.select("#houseData").text(e[2].value+"%  of homes, in the county, were build before 1950"),0==e[3].isCounty&&d3.select("#parkData").text(e[3].value+"% of people. in the state, are within half a mile of park"),1==e[3].isCounty&&d3.select("#parkData").text(e[3].value+"% of people, in the county, are within half a mile of park")})}function measureYearInfo(t,e,a){var n,r="https://ephtracking.cdc.gov/apigateway/api/v1/getYears/"+t+"/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(r,function(t,a){var l=a.length;n=a[l-1],r="https://ephtracking.cdc.gov/apigateway/api/v1/getCoreHolder/"+demoId+"/1/1/"+e+"/"+n+"/0/1?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43",d3.json(r,function(t,e){demoGraphy_income(e,n,demoId)})})}function load(){urlCDC="https://ephtracking.cdc.gov/apigateway/api/v1/getCoreHolder/66/1/1/34/2012/0/1",d3.json(urlCDC,function(t,e){d3.select("#cdcdata").text(e.tableResult[0].dataValue),d3.select("#cdcState").text(e.tableResult[0].title),newRender([e])})}function checkState(t,e,a){var n="https://ephtracking.cdc.gov/apigateway/api/v1/getStates/"+t,r=d3.queue();r.defer(findState,n,e),r.awaitAll(function(t,e){if(t)throw t;console.log("State is there"),a(null,e)})}function findState(t,e,a){var n="https://ephtracking.cdc.gov/apigateway/api/v1/getStates/"+t;d3.json(n,function(t,n){var r=n.length,l=0;for(i=0;i<r;i++)if(n[i]==e){l=1;console.log(n[i]),console.log(l)}a(null,l)})}function checkCounty(t,e){var a,n=0,r="https://ephtracking.cdc.gov/apigateway/api/v1/getGeographicLevels/"+t+"?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(r,function(t,r){a=Object.keys(r).length,2==r[0].geographicLevelId&&(n=2),1==r[0].geographicLevelId&&(n=1),e(null,n)})}function measureIdStateLocalJson(t,e,a,n,r,l,o,s){var u,d=d3.queue();d.defer(findState,a,t),d.awaitAll(function(d,c){if(d)throw d;if(1==c){var f=d3.queue();f.defer(checkCounty,a),f.awaitAll(function(d,c){if(d)throw d;if(1==c){h="https://ephtracking.cdc.gov/apigateway/api/v1/getData/"+a+"/"+t+"/0/all/0/json/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(h,function(i,d){contentAreaIndicatorName(a),console.log("Hello State!");var c;if(null!=d.tableResult[0]){f=Object.keys(d.tableResult).length;c=d.tableResult[f-1].dataValue,progress++}else if(null!=d.tableResultWithCI[0]){var f=Object.keys(d.tableResultWithCI).length;c=d.tableResultWithCI[f-1].dataValue,progress++}else c=0;var p;p=null!=d.benchmarkResult[0]?d.benchmarkResult[0].dataValue:null!=o?o:0,s(null,u={value:c,name:n,infoClip:r,national:p,desc:l,id:a,stateCode:t,countyCode:e,isCounty:0})})}else if(2==c){var f,p,y;f=e>=1&&e<10?"00"+e.toString():e>=10&&e<100?"0"+e.toString():e.toString(),t<10?p="0"+t.toString():t>=10&&(p=t.toString()),y=p+f,d3.select("#countyCode").text("County code = "+y);var h="https://ephtracking.cdc.gov/apigateway/api/v1/getData/"+a+"/"+t+"/1/all/0/json/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(h,function(d,c){contentAreaIndicatorName(a),console.log("Hello County!");var f,p=1;if(0!=c.tableResult.length){var h=Object.keys(c.tableResult).length,m=0;for(i=0;i<h;i++)c.tableResult[i].geoId==y&&(f=c.tableResult[i].dataValue,m++,progress++,p=0);1==p&&(f=0)}else if(0!=c.tableResultWithCI.length){h=Object.keys(c.tableResult).length;for(i=0;i<h;i++)c.tableResultWithCI[i].geoId==y&&(f=c.tableResultWithCI[i].dataValue,progress++);1==p&&(f=0)}if(1==p){var g="https://ephtracking.cdc.gov/apigateway/api/v1/getData/"+a+"/"+t+"/0/all/0/json/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(g,function(t,e){if(contentAreaIndicatorName(a),console.log("Hello State!"),null!=e.tableResult[0]){n=Object.keys(e.tableResult).length;f=e.tableResult[n-1].dataValue,progress++,d3.select("#progressBar").text("Progress Count ="+progress)}else if(null!=e.tableResultWithCI[0]){var n=Object.keys(e.tableResultWithCI).length;f=e.tableResultWithCI[n-1].dataValue,progress++,d3.select("#progressBar").text("Progress Count ="+progress)}else f=0})}var v;v=null!=c.benchmarkResult[0]?c.benchmarkResult[0].dataValue:null!=o?o:0,s(null,u={value:f,name:n,infoClip:r,national:v,desc:l,id:a,stateCode:t,countyCode:e,isCounty:1})})}})}0==c&&s(null,u={value:0,name:n,infoClip:r,national:0,desc:l,id:a,stateCode:t,countyCode:e,isCounty:0})})}function dataMeasureIdArray(t){dataMeasureId.push(t),checkData()}function checkData(){}function contentAreaIndicatorName(t){var e=[];d3.json("https://ephtracking.cdc.gov/apigateway/api/v1/getMeasures?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43",function(a,n){for(var r=Object.keys(n).length,l=0;l<r;l++)n[l].measureId==t&&(indicatorName=n[l].indicatorName,e.push(n[l].contentAreaName));e.splice(0)})}function getIndicatorName(t){indicatorName=t}function allYearlyTrends(t,e,a,n,r){n.replace(/\s/g,"");d3.json("data/allYearlyTrendData.json",function(l,o){JSON.stringify(o);var s=Object.keys(o[n]).length;for(i=0;i<s;i++){var u=o[n][i].measureId,d=o[n][i].calculationType,c=o[n][i].displayName;annualTrend(u,e,a,n,d,c,r)}compareDataTrend(t,e,a,n)})}function allYearlyTrendsOutlier(t,e,a,n,r){n.replace(/\s/g,"");d3.json("data/allYearlyTrendDataOutlier.json",function(t,l){JSON.stringify(l);var o=Object.keys(l[n]).length;for(i=0;i<o;i++){var s=l[n][i].measureId,u=l[n][i].calculationType,d=l[n][i].displayName;annualTrend(s,e,a,n,u,d,r)}})}function annualTrend(t,e,a,n,r,l,o){d3.select(o).selectAll("svg").remove();var i=d3.queue();i.defer(annualTrendGetData,t,e,a),i.awaitAll(function(t,e){if(t)throw t;console.log("Annual Trend received!");var a=JSON.parse(e);dataAnnualTrend=a;annualTrendVerticalChart(a,r,l,1,o),console.log(a)})}function annualTrendGetData(t,e,a,n){d3.json("data/measureIdYear.json",function(r,l){Object.keys(l).length;var o=d3.queue();o.defer(findState,t,e),o.awaitAll(function(r,l){if(r)throw r;if(1==l){var o=d3.queue();o.defer(checkCounty,t),o.await(function(r,l){if(r)throw r;if(1==l){d="https://ephtracking.cdc.gov/apigateway/api/v1/getData/"+t+"/"+e+"/0/all/0/json/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(d,function(t,e){console.log("Hello State Annual!");var a={},a={yearTrend:[]};if(0!=e.tableResult.length){r=Object.keys(e.tableResult).length;for(i=0;i<r;i++)a.yearTrend.push({year:e.tableResult[i].year,value:e.tableResult[i].dataValue})}else if(0!=e.tableResultWithCI.length){var r=Object.keys(e.tableResultWithCI).length;for(i=0;i<r;i++)a.yearTrend.push({year:e.tableResultWithCI[i].year,value:e.tableResultWithCI[i].dataValue})}else a.yearTrend.push({year:0,value:0});var l=JSON.stringify(a);n(null,l)})}if(2==l){var o,s,u;o=a>=1&&a<10?"00"+a.toString():a>=10&&a<100?"0"+a.toString():a.toString(),e<10?u="0"+e.toString():e>=10&&(u=e.toString()),s=u+o;var d="https://ephtracking.cdc.gov/apigateway/api/v1/getData/"+t+"/"+e+"/1/all/0/json/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(d,function(a,r){console.log("Hello County Annual!");Object.keys(r.tableResult).length;var l={},l={yearTrend:[]},o=1;if(0!=r.tableResult.length){var u=Object.keys(r.tableResult).length,d=0;for(i=0;i<u;i++)r.tableResult[i].geoId==s&&(l.yearTrend.push({year:r.tableResult[i].year,value:r.tableResult[i].dataValue}),d++,progress++,d3.select("#progressBar").text("Progress Count ="+progress),o=0)}else if(0!=r.tableResultWithCI.length){u=Object.keys(r.tableResultWithCI).length;for(i=0;i<u;i++)r.tableResultWithCI[i].geoId==s&&(l.yearTrend.push({year:r.tableResultWithCI[i].year,value:tableResultWithCI[i].dataValue}),d++,progress++,d3.select("#progressBar").text("Progress Count ="+progress),o=0)}else if(1==o){var c="https://ephtracking.cdc.gov/apigateway/api/v1/getData/"+t+"/"+e+"/0/all/0/json/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";d3.json(c,function(e,a){if(contentAreaIndicatorName(t),console.log("Hello State!"),0!=a.tableResult.length){n=Object.keys(a.tableResult).length;for(i=0;i<n;i++)l.yearTrend.push({year:a.tableResult[i].year,value:a.tableResult[i].dataValue})}if(0!=a.tableResultWithCI.length){var n=Object.keys(a.tableResultWithCI).length;for(i=0;i<n;i++)l.yearTrend.push({year:a.tableResultWithCI[i].year,value:a.tableResultWithCI[i].dataValue})}else l.yearTrend.push({year:0,value:0})})}var f=JSON.stringify(l);n(null,f)})}})}})})}function yearDataValueArray(t,e){this.year=t,this.value=e}function compareDataTrend(t,e,a,n){d3.select("div#compareDataPlot").selectAll("svg").remove(),plotMultipileTrendsCompare(t,e,a,n)}function plotMultipileTrendsCompare(t,e,a,n){d3.json("data/sideCompare.json",function(t,r){JSON.stringify(r);var l=Object.keys(r[n]).length,o=r[n][0].measureId,s=r[n][0].displayName,u=r[n][0].calculationType,d=d3.queue();d.defer(annualTrendGetData,o,e,a),d.await(function(t,o){var d=JSON.parse(o);for(i=1;i<l;i++){var c=r[n][i].measureId,f=r[n][i].displayName,p=r[n][i].calculationType;annualTrendCompare(c,e,a,n,d,s,u,f,p,"div#compareDataPlot")}})})}function annualTrendCompare(t,e,a,n,r,l,o,i,s,u){var d=d3.queue();d.defer(annualTrendGetData,t,e,a),d.awaitAll(function(t,e){if(t)throw t;console.log("Annual Trend received!");var a=JSON.parse(e);dataAnnualTrend=a,annualTrendBubbleChart(r,a,l,o,i,s,u)})}function summaryMap(t,e,a,n,r,l){var o=d3.queue();o.defer(getJsonData,a),o.await(function(t,e){count=Object.keys(e.central).length;for(var a=d3.queue(),o=0;o<count;o++){var i=e.central[o].measureId,s=e.central[o].name,u=e.central[o].info,d=e.central[o].desc,c=e.central[o].bench;d3.select("#progressBar").text("Progress Count ="+progress),a.defer(measureIdStateLocalJson,stateCode,countyCode,i,s,u,d,c)}a.awaitAll(function(t,e){if(t)throw t;2==++summaryCounter&&$("#loading").hide(),console.log("The counter is ="+summaryCounter),dataMeasureId=e,summaryMapDisplay(dataMeasureId,n,r,l)})})}function summaryMapDisplay(t,e,a,n){circleRadius=120;var r=[],l=t,o=0,s=(l=l.sort(function(t,e){return t.value-e.value}))[0].value;for(i=0;i<l.length-1;i++)s=l[i].value<=l[i+1].value?l[i+1].value:s;var u=l.length;d3.scaleLinear().domain([0,s]).range([0,200]);for(i=0;i<l.length-1;i++)if(l[i].value/l[i].national>1.5){var d=Math.floor(l[i].value/l[i].national*100)/100;r.push({idName:l[i].name,ratio:d,value:l[i].value,isCounty:l[i].isCounty,national:l[i].national,infoClip:l[i].infoClip,stateCode:l[i].stateCode,countyCode:l[i].countyCode,id:l[i].measureId,typeName:l[i].typeName})}var c=(r=r.sort(function(t,e){return t.ratio-e.ratio})).length;c>0&&d3.select(n).html("<span style=color:#ffbf00><strong>Outlier(s): Rates more then 1.5 times of national rates</strong></span>");var f=d3.select(a).attr("width",400).attr("height",35*r.length/1+40).selectAll("g").data(r).enter().append("g").attr("transform",function(t,e){return"translate(0,"+0*e+")"}).on("click",function(t){ScrollTo("annualTrendTitle"),$("#fourthRow").show(1e3),$("#fifthRow").hide(1e3),d3.select("#compareInfo").text(""),$("#annualArrow").show(1e3),$("#sideCompareArrow").hide(1e3),allYearlyTrendsOutlier(t.id,t.stateCode,t.countyCode,t.idName,"div#annualChart")}).style("display","block").style("cursor","pointer");Math.floor(c);f.append("text").attr("y",function(t,e){return 40*Math.floor(e/1)+10}).attr("x",function(t,e){return 390*(e%1)+190}).attr("dy","0.35em").attr("font-family","sans-serif").attr("font-size","0.90em").attr("text-anchor","middle").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).text(function(t){return t.idName}),f.append("text").attr("y",function(t,e){return 40*Math.floor(e/1)+25}).attr("x",function(t,e){return 390*(e%1)+190}).attr("dy","0.35em").attr("font-family","sans-serif").attr("font-size","0.90em").attr("text-anchor","middle").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).text(function(t){return t.value+" "+t.infoClip});var p=d3.select(e).attr("width",400).attr("height",35*l.length/1+120),y=(d3.select("body").append("div").attr("class","tooltip1").style("opacity",0),p.selectAll("g").data(l).enter().append("g").attr("transform",function(t,e){return"translate(0,"+0*e+")"}).on("click",function(t){}));Math.floor(u/1);y.append("rect").attr("class","summaryRect").attr("y",function(t,e){return 40*Math.floor(e/1)}).attr("x",function(t,e){return 390*(e%1)}).attr("width",function(t){return 380}).attr("height",35).attr("rx",10).attr("ry",10).style("fill",function(t){if(0!=t.value&&null!=t.value){if(parseFloat(t.value)>parseFloat(t.national))return o++,"#d4d4d4";if(parseFloat(t.value)<=parseFloat(t.national))return"#9c9c9c"}if(0==parseFloat(t.value)||null==t.value)return"#A3D7FA"}),y.append("text").attr("y",function(t,e){return 40*Math.floor(e/1)+10}).attr("x",function(t,e){return 390*(e%1)+190}).attr("dy","0.35em").attr("font-family","sans-serif").attr("font-size","0.85em").attr("text-anchor","middle").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).text(function(t){if(0!=parseFloat(t.national)){if(0==t.isCounty)return t.name;if(1==t.isCounty)return t.name}if(0==parseFloat(t.national)){if(0==t.isCounty)return t.name;if(1==t.isCounty)return t.name}}),y.append("text").attr("y",function(t,e){return 40*Math.floor(e/1)+25}).attr("x",function(t,e){return 390*(e%1)+190}).attr("dy","0.35em").attr("font-family","sans-serif").attr("font-size","0.85em").attr("text-anchor","middle").style("fill","#000000").style("font-weight",function(t){if(0!=t.value&&null!=t.value){if(0!=t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.national){if(0==t.isCounty)return"bold";if(1==t.isCounty)return""}if(0==t.value||null==t.value)return""}}).text(function(t){if(0!=t.value&&null!=t.value){if(0!=parseFloat(t.national)){if(0==t.isCounty)return parseFloat(t.value)+", "+parseFloat(t.national)+" ("+t.infoClip+")";if(1==t.isCounty)return parseFloat(t.value)+", "+parseFloat(t.national)+" ("+t.infoClip+")";if(0==t.value)return"NA, "+parseFloat(t.national)+" ("+t.infoClip+")"}if(0==parseFloat(t.national)){if(0==t.isCounty)return parseFloat(t.value)+", NA ("+t.infoClip+")";if(1==t.isCounty)return parseFloat(t.value)+", NA ("+t.infoClip+")";if(0==t.value)return"NA, NA"}}if(0==parseFloat(t.value)||null==t.value)return"No Data"}),d3.select("h5#summaryDataLegend").html("*<strong>If font is bold: Left side data is  state level.</strong> If font is normal: Left side data is county level. Right side data is always national level. NA means data not available.").style("color","#898a8c").style("text-anchor","middle").style("text-align","center"),d3.select("h5#summaryDataLegend_L").html("*<strong>If font is bold: Left side data is  state level.</strong> If font is normal: Left side data is county level. Right side data is always national level. NA means data not available.").style("color","#ffffff").style("text-anchor","middle").style("text-align","center"),d3.select("h5#summaryDataLegend_R").html("*<strong>If font is bold: Left side data is  state level.</strong> If font is normal: Left side data is county level. Right side data is always national level. NA means data not available.").style("color","#ffffff").style("text-anchor","middle").style("text-align","center")}function getTwoMeasureId(){firstId=document.getElementById("measureId1").value,secondId=document.getElementById("measureId2").value,d3.select("p#measureIdInfo2").text("The value is ="+secondId);var t=d3.queue();t.defer(getJsonData,"data/twoIdCompare.json"),t.await(function(t,e){var a,n,r,l,o,s,u=Object.keys(e.compareTwo).length;for(i=0;i<u;i++)e.compareTwo[i].displayName==firstId&&(a=e.compareTwo[i].measureId,r=e.compareTwo[i].displayName,l=e.compareTwo[i].calculationType,d3.select("p#measureIdInfo1").text("The value is = "+r)),e.compareTwo[i].displayName==secondId&&(n=e.compareTwo[i].measureId,o=e.compareTwo[i].displayName,s=e.compareTwo[i].calculationType);annualTwoCompare(a,l,r,stateCode,countyCode,"div#compareTwo_1",1),annualTwoCompare(n,s,o,stateCode,countyCode,"div#compareTwo_2",2)})}function annualTwoCompare(t,e,a,n,r,l,o){d3.select(l).selectAll("svg").remove();var i=d3.queue();i.defer(annualTrendGetData,t,n,r),i.awaitAll(function(t,n){if(t)throw t;d3.select("p#compareDataLength").text("I am here"),console.log("Annual Trend received!");var r=JSON.parse(n);dataAnnualTrend=r;if(annualTrendVerticalChart(r,e,a,0,l),1==o){twoCompareYear1.splice(0),twoCompareValue1.splice(0);for(i=0;i<dataAnnualTrend.yearTrend.length;i++)twoCompareValue1.push(parseFloat(dataAnnualTrend.yearTrend[i].value)),twoCompareYear1.push(dataAnnualTrend.yearTrend[i].year)}if(2==o){twoCompareYear2.splice(0),twoCompareValue2.splice(0);for(var i=0;i<dataAnnualTrend.yearTrend.length;i++)twoCompareValue2.push(parseFloat(dataAnnualTrend.yearTrend[i].value)),twoCompareYear2.push(dataAnnualTrend.yearTrend[i].year)}compareCorr(twoCompareYear1,twoCompareValue1,twoCompareYear2,twoCompareValue2)})}function getRaceData(t,e){var a,n;a=e>=1&&e<10?"00"+e.toString():e>=10&&e<100?"0"+e.toString():e.toString(),t<10?n="0"+t.toString():t>=10&&(n=t.toString());var r="http://api.census.gov/data/2010/sf1?get=P0030001,P0030002,P0030003,P0030004,P0030005,P0030006,P0030007&for=county:"+a+"&in=state:"+n+"&key=bb59db4da765d1abf74c09d80e00a687d76b611f";d3.json(r,function(t){var e=t[0],a=t;a.splice(0,1),arrayCensus=[];for(var n=0;n<a.length;n++){for(var r={},l=0;l<a[n].length;l++)r[e[l]]=a[n][l];arrayCensus.push(r)}var o,i,s,u,d;o=arrayCensus[0].P0030001,i=arrayCensus[0].P0030002,s=arrayCensus[0].P0030003,u=arrayCensus[0].P0030005,nativeA=arrayCensus[0].P0030004,d=arrayCensus[0].P0030007,nativeH=arrayCensus[0].P0030006,i=Math.round(100*i*100/o)/100,s=Math.round(100*s*100/o)/100,u=Math.round(100*u*100/o)/100,nativeA=Math.round(100*nativeA*100/o)/100,d=Math.round(100*d*100/o)/100,nativeH=Math.round(100*nativeH*100/o)/100;var c=[];c[0]={name:"White",value:i},c[1]={name:"Black",value:s},c[2]={name:"Asian",value:u},c[3]={name:"Native American",value:nativeA},c[4]={name:"Native Hawaiian",value:nativeH},c[5]={name:"Others",value:d};raceDataChart(c,2010,"div#raceInfo")})}function getMaleeData(t,e){var a,n;a=e>=1&&e<10?"00"+e.toString():e>=10&&e<100?"0"+e.toString():e.toString(),t<10?n="0"+t.toString():t>=10&&(n=t.toString());var r="http://api.census.gov/data/2010/sf1?get=P0120002,P0120003,P0120004,P0120005,P0120006,P0120007,P0120008,P0120009,P0120010,P0120011,P0120012,P0120013,P0120014,P0120015,P0120016,P0120017,P0120018,P0120019,P0120020,P0120021,P0120022,P0120023,P0120024,P0120025&for=county:"+a+"&in=state:"+n+"&key=bb59db4da765d1abf74c09d80e00a687d76b611f";d3.json(r,function(t){var e=t[0],a=t;a.splice(0,1),arrayCensus=[];for(var n=0;n<a.length;n++){for(var r={},l=0;l<a[n].length;l++)r[e[l]]=parseFloat(a[n][l]);arrayCensus.push(r)}var o,i,s,u,d;o=arrayCensus[0].P0120002,malePopulation=o,0!=femalePopulation&&(maleFemaleRatio=Math.round(100*malePopulation/femalePopulation)/100,d3.select("p#genderRatio").text("The male to female ratio is "+maleFemaleRatio)),i=arrayCensus[0].P0120003+arrayCensus[0].P0120004+arrayCensus[0].P0120005+arrayCensus[0].P0120006+arrayCensus[0].P0120007+arrayCensus[0].P0120008+arrayCensus[0].P0120009,s=arrayCensus[0].P0120010+arrayCensus[0].P0120011+arrayCensus[0].P0120012+arrayCensus[0].P0120013+arrayCensus[0].P0120014+arrayCensus[0].P0120015,u=arrayCensus[0].P0120016+arrayCensus[0].P0120017+arrayCensus[0].P0120018+arrayCensus[0].P0120019+arrayCensus[0].P0120020,d=arrayCensus[0].P0120021+arrayCensus[0].P0120022+arrayCensus[0].P0120023+arrayCensus[0].P0120024+arrayCensus[0].P0120025,i=Math.round(100*i*100/o)/100,s=Math.round(100*s*100/o)/100,u=Math.round(100*u*100/o)/100,d=Math.round(100*d*100/o)/100;var c=[];c[0]={name:"0-21 years",value:i},c[1]={name:"22-49 years",value:s},c[2]={name:"50-66 years",value:u},c[3]={name:"> 67 years",value:d};maleFemaleDataChart(c,2010,"div#maleInfo","Male(%)")})}function getFemaleData(t,e){var a,n;a=e>=1&&e<10?"00"+e.toString():e>=10&&e<100?"0"+e.toString():e.toString(),t<10?n="0"+t.toString():t>=10&&(n=t.toString());var r="http://api.census.gov/data/2010/sf1?get=P0120026,P0120027,P0120028,P0120029,P0120030,P0120031,P0120032,P0120033,P0120034,P0120035,P0120036,P0120037,P0120038,P0120039,P0120040,P0120041,P0120042,P0120043,P0120044,P0120045,P0120046,P0120047,P0120048,P0120049&for=county:"+a+"&in=state:"+n+"&key=bb59db4da765d1abf74c09d80e00a687d76b611f";d3.json(r,function(t){var e=t[0],a=t;a.splice(0,1),arrayCensus=[];for(var n=0;n<a.length;n++){for(var r={},l=0;l<a[n].length;l++)r[e[l]]=parseFloat(a[n][l]);arrayCensus.push(r)}var o,i,s,u,d;o=arrayCensus[0].P0120026,femalePopulation=o,0!=malePopulation&&(maleFemaleRatio=Math.round(100*malePopulation/femalePopulation)/100,d3.select("p#genderRatio").text("The male to female ratio is "+maleFemaleRatio)),i=arrayCensus[0].P0120027+arrayCensus[0].P0120028+arrayCensus[0].P0120029+arrayCensus[0].P0120030+arrayCensus[0].P0120031+arrayCensus[0].P0120032+arrayCensus[0].P0120033,s=arrayCensus[0].P0120034+arrayCensus[0].P0120035+arrayCensus[0].P0120036+arrayCensus[0].P0120037+arrayCensus[0].P0120038+arrayCensus[0].P0120039,u=arrayCensus[0].P0120040+arrayCensus[0].P0120041+arrayCensus[0].P0120042+arrayCensus[0].P0120043+arrayCensus[0].P0120044,d=arrayCensus[0].P0120045+arrayCensus[0].P0120046+arrayCensus[0].P0120047+arrayCensus[0].P0120048+arrayCensus[0].P0120049,i=Math.round(100*i*100/o)/100,s=Math.round(100*s*100/o)/100,u=Math.round(100*u*100/o)/100,d=Math.round(100*d*100/o)/100;var c=[];c[0]={name:"0-21 years",value:i},c[1]={name:"22-49 years",value:s},c[2]={name:"50-66 years",value:u},c[3]={name:"> 67 years",value:d};maleFemaleDataChart(c,2010,"div#femaleInfo","Female(%)")})}function sideDataCircle(){var t=d3.select("svg#Circle").attr("width",275).attr("height",200),e=[32,293,100,30,70,90],a=t.selectAll(".circle").data(e).enter().append("circle");a.attr("cy",function(t,e){return e<=2?60:e>2&&e<=5?150:180}),a.attr("cx",function(t,e){return e<=2?80*e+70:e>2&&e<=5?80*(e-3)+70:void 0}),a.attr("r",function(t){return 30});t.selectAll("text").data(e).enter().append("text").attr("x",function(t,e){return e<=2?80*e+70:e>2&&e<=5?80*(e-3)+70:void 0}).attr("y",function(t,e){return e<=2?60:e>2&&e<=5?150:180}).attr("dy","0.35em").text(function(t){return"("+t+")"}).attr("font-family","sans-serif").attr("font-size","1em").attr("text-anchor","middle").attr("fill","red"),t.selectAll("text").attr("x",function(t,e){return e<=2?80*e+70:e>2&&e<=5?80*(e-3)+70:void 0}).attr("y",function(t,e){return e<=2?90:e>2&&e<=5?180:210}).attr("dy","0.35em").text(function(t){return"("+t+")"}).attr("font-family","sans-serif").attr("font-size","1em").attr("text-anchor","middle").attr("fill","red")}function threeCircle(){var t=d3.select("svg#colorCode"),e=[32,293],a=t.selectAll(".codeCircle").data(e).enter().append("circle");a.attr("cy",60),a.attr("cx",function(t,e){return 50*e+100}),a.attr("r",function(t){return Math.sqrt(t)});t.selectAll("text").data(e).enter().append("text").attr("x",function(t,e){return 50*e+50}).attr("y",60).text(function(t){return"("+t+")"}).attr("font-family","sans-serif").attr("font-size","20px").attr("fill","red")}function circleText(t){var e=[{x:20,y:20,height:25,width:30,color:"#d4d4d4",info:"Above National Average"},{x:20,y:60,height:25,width:30,color:"#9c9c9c",info:"Below National Average"}],a=d3.select(t).append("svg").attr("width",300).attr("height",100);a.selectAll("rect").data(e).enter().append("rect").attr("class","codeCircle").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("height",function(t){return t.height}).attr("width",function(t){return t.width}).style("fill",function(t){return t.color}),a.selectAll("text").data(e).enter().append("text").attr("x",function(t){return t.x+35}).attr("y",function(t){return t.y+18}).text(function(t){return t.info}).attr("font-family","sans-serif").attr("text-anchor","start").attr("font-size","0.85em").attr("fill","black")}function annualTrendVerticalChart(t,e,a,n,r){1==n&&(d3.select("h5#annualTrendTitle").text("Annual Trends for "+a),a="");for(var l=[],o=[],i=0;i<t.yearTrend.length;i++)l.push(parseFloat(t.yearTrend[i].value)),o.push(t.yearTrend[i].year);var s={top:20,right:30,bottom:100,left:50},u=500-s.left-s.right,d=350-s.top-s.bottom,c=d3.scaleBand().range([0,u]),f=d3.scaleLinear().range([d,0]),p=d3.axisBottom().scale(c).ticks(10);d3.axisLeft(f).scale(f);c.domain(o.map(function(t){return t})),f.domain([0,1.4*d3.max(l,function(t){return t})]);var y=u/(2*o.length),h=d3.select(r).append("svg").attr("width",u+s.left+s.right).attr("height",d+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.right+")");h.append("g").attr("class"," x axis").attr("transform","translate(0,"+d+")").call(p).selectAll("text").style("font-size","1em").style("fill","#666699").style("text-anchor","end").attr("dx","-0.6em").attr("dy","0.25em").attr("transform","rotate(-45)"),h.append("text").attr("transform","translate("+u/2+" ,"+(0-s.top+40)+")").style("text-anchor","middle").style("fill","#ffffff").text(e),h.selectAll(".bar").data(l).enter().append("rect").attr("class","bar").attr("x",function(t,e){return c(o[e])+y/2}).attr("y",function(t){return f(t)}).attr("height",0).attr("height",function(t){return d-f(t)}).attr("width",20).select("text").data(l).enter().append("text").attr("x",function(t,e){return 1*(c(o[e])+y/2+10)}).attr("y",function(t,e){return f(t)+2}).attr("dy","-.75em").style("fill","#ffffff").style("font-size","0.65em").attr("text-anchor","middle").text(function(t,e){return t})}function annualTrendBubbleChart(t,e,a,n,r,l,o){1==healthClick&&d3.select("h5#compareInfo").text("Comparison of "+a+" with enviromental and lifestyle factors"),1!=envClick&&1!=lifClick||d3.select("h5#compareInfo").text("Comparison of "+a+" with disease");var i=e.yearTrend.length,s=t.yearTrend.length,u={compareTrend:[]},d=0,c=[],f=[];for(g=0;g<i;g++){var p=0;for(j=0;j<s;j++)t.yearTrend[j].year==e.yearTrend[g].year&&(d++,u.compareTrend.push({year:e.yearTrend[g].year,sideValue:parseFloat(e.yearTrend[g].value),mainValue:parseFloat(t.yearTrend[j].value)}),p=1,c.push(e.yearTrend[g].value),f.push(t.yearTrend[j].value));0==p&&(d3.select("p#matchedYear").text("Year Matched = "+d),u.compareTrend.push({year:e.yearTrend[g].year,sideValue:parseFloat(e.yearTrend[g].value),mainValue:0}))}for(var y=[],h=[],m=[],g=0;g<u.compareTrend.length;g++)y.push(u.compareTrend[g].sideValue),h.push(u.compareTrend[g].year),m.push(u.compareTrend[g].mainValue);for(var v=[],g=0;g<u.compareTrend.length;g++)v.push({x:h[g],y:y[g],r:m[g]});var C={top:20,right:30,bottom:100,left:50},x=500-C.left-C.right,b=350-C.top-C.bottom,w=d3.scaleBand().range([0,x]),T=d3.scaleLinear().range([b,0]),P=x/(2*v.length),I=d3.max(m,function(t){return t}),D=d3.axisBottom().scale(w),A=d3.axisLeft(T).scale(T);w.domain(h.map(function(t){return t})),T.domain([0,1.4*d3.max(y,function(t){return t})]);var R=d3.select(o).append("svg").attr("width",x+C.left+C.right).attr("height",b+C.top+C.bottom).append("g").attr("transform","translate("+C.left+","+C.right+")");R.append("g").attr("class"," x side").attr("transform","translate(0,"+b+")").call(D).selectAll("text").style("font-size","1.5em").style("fill","#666699").style("text-anchor","end").attr("dx","-0.4em").attr("dy","1em").attr("transform","rotate(-45)"),R.append("text").attr("transform","translate("+x/2+" ,"+(b+C.top+40)+")").style("text-anchor","middle").style("fill","#666666").text("Year"),R.append("g").attr("class","y side").call(A).selectAll("text").style("font-size","1em"),R.append("text").attr("transform","rotate(-90)").attr("y",0-C.left).attr("x",0-b/2).attr("dy","1em").style("text-anchor","middle").style("fill","#666666").text(l),R.append("text").attr("transform","translate("+x/2+" ,"+(0-C.top+5)+")").style("text-anchor","middle").style("fill","#666666").text(r);var F=findCorr(c,f);R.append("text").attr("transform","translate("+x/2+" ,"+(0-C.top+25)+")").style("text-anchor","middle").style("fill","#666666").text("Correlation Coefficient: "+F);var k=d3.select("body").append("div").attr("class","tooltip1").style("opacity",0);R.selectAll("circle").data(v).enter().append("circle").attr("class","circle").attr("cx",function(t,e){return w(t.x)+P}).attr("cy",function(t){return T(t.y)}).attr("r",function(t,e){return 15*t.r/I}).attr("fill","#597DFF").on("mouseover",function(t){k.transition().duration(5).style("opacity",1),k.html(a+"<br/>"+t.r+" "+n).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){k.transition().duration(5).style("opacity",0)}),R.selectAll("rect").data(v).enter().append("rect").attr("class","rect").attr("x",function(t,e){return w(t.x)+P-1}).attr("dx",-3).attr("y",function(t){return T(t.y)}).attr("height",function(t){return b-T(t.y)}).attr("width",3).attr("fill","#669999")}function drawAxis(t){function e(){n=d3.select("div#verticalChart").append("svg").attr("class","axis").attr("width",l).attr("height",r)}function a(t,e,a){var r=t().scale(e).ticks(5);n.append("g").attr("transform",function(){return[d3.axisTop,d3.axisBottom].indexOf(t)>=0?"translate("+o+","+a*i+")":"translate("+a*i+","+o+")"}).call(r)}var n,r=100,l=500,o=25,i=50,s=l-2*o;!function(t){n&&n.remove(),e(),a(t,d3.scaleLinear().domain([0,1e3]).range([0,s],1)),a(t,d3.scalePow().exponent(2).domain([0,1e3]).range([0,s]),2)}(t)}function raceDataChart(t,e,a){for(var n=[],r=[],l=0;l<t.length;l++)n.push(t[l].value),r.push(t[l].name);var o={top:50,right:10,bottom:70,left:30},i=250-o.left-o.right,s=260-o.top-o.bottom,u=d3.scaleBand().range([0,i]),d=d3.scaleLinear().range([s,0]),c=d3.scaleOrdinal(d3.schemeCategory20),f=d3.axisBottom().scale(u).ticks(10).tickSize(0);d3.axisLeft(d).scale(d);u.domain(r.map(function(t){return t})),d.domain([0,1.4*d3.max(n,function(t){return t})]);var p=i/(2*r.length),y=d3.select(a).append("svg").attr("width",i+o.left+o.right).attr("height",s+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.right+")");y.append("g").attr("class","x race").attr("transform","translate(0,"+s+")").call(f).selectAll("text").style("font-size","1.5em").style("fill","#666699").style("text-anchor","end").attr("dx","0.4em").attr("dy","1em").attr("transform","rotate(-45)"),y.append("text").attr("transform","translate("+.4*i+" ,"+(o.top-40)+")").style("text-anchor","start").style("font-size","1em").style("fill","#666699").html("Race (%)"),y.append("text").attr("transform","translate("+.4*i+" ,"+(o.top-20)+")").style("text-anchor","start").style("font-size","1em").style("fill","#666699").html("(2010 Census)"),y.selectAll(".bar").data(n).enter().append("rect").attr("class","raceBar").attr("x",function(t,e){return u(r[e])+p}).attr("y",function(t){return d(t)}).attr("height",function(t){return s-d(t)}).attr("width",20).style("fill",function(t){return c(t)}).select("text").data(n).enter().append("text").attr("x",function(t,e){return 1*(u(r[e])+p+10)}).attr("y",function(t,e){return d(t)+2}).attr("dy","-.75em").style("fill","#666699").style("font-size","0.75em").attr("text-anchor","middle").text(function(t,e){return t})}function maleFemaleDataChart(t,e,a,n){for(var r=[],l=[],o=0;o<t.length;o++)r.push(t[o].value),l.push(t[o].name);var i={top:60,right:10,bottom:50,left:40},s=250-i.left-i.right,u=260-i.top-i.bottom,d=d3.scaleBand().range([0,s]),c=d3.scaleLinear().range([u,0]),f=d3.scaleOrdinal(d3.schemeCategory20),p=d3.axisBottom().scale(d).ticks(10).tickSize(0);d3.axisLeft(c).scale(c);d.domain(l.map(function(t){return t})),c.domain([0,1.6*d3.max(r,function(t){return t})]);var y=s/(2*l.length),h=d3.select(a).append("svg").attr("width",s+i.left+i.right).attr("height",u+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.right+")");h.append("g").attr("class","x race").attr("transform","translate(0,"+u+")").call(p).selectAll("text").style("font-size","1.5em").style("fill","#666699").style("text-anchor","end").attr("dx","0.4em").attr("dy","1em").attr("transform","rotate(-45)"),h.append("text").attr("transform","translate("+.4*s+" ,"+(i.top-50)+")").style("text-anchor","start").style("font-size","1em").style("fill","#666699").html(n),h.append("text").attr("transform","translate("+.4*s+" ,"+(i.top-30)+")").style("text-anchor","start").style("font-size","1em").style("fill","#666699").html("(2010 Census)"),h.selectAll(".bar").data(r).enter().append("rect").attr("class","raceBar").attr("x",function(t,e){return d(l[e])+y}).attr("y",function(t){return c(t)}).attr("height",function(t){return u-c(t)}).attr("width",20).style("fill",function(t){return f(t)}).select("text").data(r).enter().append("text").attr("x",function(t,e){return 1*(d(l[e])+y+10)}).attr("y",function(t,e){return c(t)+2}).attr("dy","-.75em").style("fill","#666699").style("font-size","0.75em").attr("text-anchor","middle").text(function(t,e){return t})}function getFinancialChart(t,e,a){for(var n=[],r=[],l=0;l<t.length;l++)n.push(t[l].value),r.push(t[l].name);console.log(n),console.log(r);var o={top:40,right:10,bottom:30,left:60},i=230-o.left-o.right,s=250-o.top-o.bottom,u=d3.scaleBand().range([0,.5*i]),d=d3.scaleLinear().range([s,0]),c=d3.scaleOrdinal(d3.schemeCategory20),f=d3.axisBottom().scale(u).ticks(10).tickSize(0);d3.axisLeft(d).scale(d);u.domain(r.map(function(t){return t})),d.domain([0,1.3*d3.max(n,function(t){return t})]);var p=i/(2*r.length),y=d3.select(a).append("svg").attr("width",i+o.left+o.right).attr("height",s+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.right+")");y.append("g").attr("class","x race").attr("transform","translate(-20,"+s+")").call(f).selectAll("text").style("font-size","1.5em").style("fill","#666699").style("text-anchor","end").attr("dx","0.25em").attr("dy","1em").attr("transform","rotate(-45)"),y.append("text").attr("transform","translate("+.5*i+" ,"+(o.top-20)+")").style("text-anchor","middle").style("font-size","1em").style("fill","#666699").html(e),y.selectAll(".bar").data(n).enter().append("rect").attr("class","raceBar").attr("x",function(t,e){return u(r[e])+0*p}).attr("y",function(t){return d(t)}).attr("height",function(t){return s-d(t)}).attr("width",20).style("fill",function(t){return c(t)}).select("text").data(n).enter().append("text").attr("x",function(t,e){return 1*(u(r[e])+0*p+10)}).attr("y",function(t,e){return d(t)+2}).attr("dy","-.75em").style("fill","#666699").style("font-size","0.75em").attr("text-anchor","middle").text(function(t,e){return t})}function numberToThousands(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ScrollTo(t){ScrollToResolver(document.getElementById(t))}function ScrollToResolver(t){var e=parseInt(.2*t.getBoundingClientRect().top);document.body.scrollTop+=e,document.documentElement.scrollTop+=e,!t.lastjump||t.lastjump>Math.abs(e)?(t.lastjump=Math.abs(e),setTimeout(function(){ScrollToResolver(t)},"100")):t.lastjump=null}function findBenchMark(){var t;d3.json("https://ephtracking.cdc.gov/apigateway/api/v1/getYears/589/?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43",function(e,a){var n=a.length;t=a[n-1],console.log(t);var r="https://ephtracking.cdc.gov/apigateway/api/v1/getData/589/all/0/"+t+"/0/json?apiToken=01327487-BDCF-4681-9072-D296DF2BCF43";r="https://ephtracking.cdc.gov/apigateway/api/v1/getData/589/all/0/"+t+"/0/json",d3.json(r,function(t,e){var a=0,n=0,r=0;if(console.log(e),console.log(e.tableResult.length),0!=e.tableResult.length)for(i=0;i<e.tableResult.length;i++)null!=e.tableResult[i].dataValue&&(a+=parseFloat(e.tableResult[i].dataValue),n++);else if(0!=e.tableResultWithCI.length)for(i=0;i<e.tableResultWithCI.length;i++)null!=e.tableResultWithCI[i].dataValue&&(a+=parseFloat(e.tableResultWithCI[i].dataValue),n++);r=a/n,console.log(r),console.log(n)})})}function findCorr(t,e){var a=[],n=[];for(i=0;i<t.length;i++)a.push(parseFloat(t[i]));for(i=0;i<e.length;i++)n.push(parseFloat(e[i]));var r=jStat.corrcoeff(a,n);return parseFloat(r).toFixed(2)}function compareCorr(t,e,a,n){var r=[],l=[],o=[],s=[],u=[],d=[],c=0;for(i=0;i<t.length;i++)r.push(parseFloat(t[i]));for(i=0;i<a.length;i++)l.push(parseFloat(a[i]));for(i=0;i<e.length;i++)o.push(parseFloat(e[i]));for(i=0;i<n.length;i++)s.push(parseFloat(n[i]));var f=r.length,p=l.length;for(i=0;i<f;i++){for(j=0;j<p;j++)a[j]==t[i]&&(u.push(e[i]),d.push(n[j]),1)}c=findCorr(u,d),d3.select("h5#twoCorr").html("Correlation coefficient is = "+c)}